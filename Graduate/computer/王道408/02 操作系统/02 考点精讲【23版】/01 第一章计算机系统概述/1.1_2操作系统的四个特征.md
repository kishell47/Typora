# 操作系统的四个特征



## 知识总览

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291733332.png" alt="image-20230429173324267" style="zoom: 50%;" />

* 操作系统有并发，共享，虚拟和异步这四个基本的特征，其中并发和共享是两个最基本的特征，二者互为存在条件。



## 操作系统的特征——并发

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291739179.png" alt="image-20230429173901110" style="zoom: 67%;" />

* 首先看一下并发这个特征
* **并发**是指两个或者多个事件同一时间间隔内发生。这些事件**宏观上看是同时发生的**，**微观上其实是交替发生的**。
* 与这个并发概念比较容易混淆的是**并行**的概念，并行是指两个或者多个事件在同一时刻同时发生。
* 并发和并行的区别用一个例子来进行说明
  * 假设有两个人，一个是小渣，一个是老渣，他们都有两个女朋友，然后有两个任务。都是分别和一号约和二号约，那么如果对于小渣来说他采用的约会方式是和一号二号一起约会。
  * 而老渣采用的约会方式是在各个时间段内交替的和两个女朋友进行约会。
  * 对于小渣的这种方式来说，它其实采用的就是并行约会的策略，并行的意思是指两个或者多个事件同一时刻同时发生。也就是说对于小渣来说，他在同一时刻其实是同时在进行看两个约会任务。
  * 对于老渣来说它采用的是并发约会的这种方式。在宏观上看，这整天老渣完成了两个约会任务，但是在微观上看，任何一个时刻老渣其实只在执行其中的某一个约会任务。这就是所谓的微观上交替发生，而宏观上同时发生的并发的这种特征。
* 操作系统的开发性
  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291811247.png" alt="image-20230429181155133" style="zoom: 57%;" />
  * **操作系统的并发性**指的是在计算机当中同时运行着多个程序。这些程序宏观上看是同时运行着的，但是微观上看，其实是交替运行的。
  * 为什么并发性对于操作系统来说是一个很重要的基本特性？
    * 其实操作系统就是伴随着“多道程序技术“出现的，这个会在下个小节操作系统的发展历史当中有进一步的介绍
    * 总之操作系统的出现就是为了支持多道程序并发运行，同时运行而诞生的。
  * 需要注意一个很重要的考点，对于个**单核CPU**来说，同一时刻只能执行**一个程序**。因此一个单核CPU的系统当中，各个程序肯定是只能**并发**的执行。但是，对于**多核CPU**来说，同一时刻可以同时执行**多个程序**。也就是说，多个程序可以**并行**的执行。
    * 举个例子，英特尔Intel第八代i3处理器就是一种4核CPU，4核CPU就意味着它可以**并行的执行4个程序**。
      * 比如说在这个CPU上可以同时并行的运行微信、QQ 、Word、Chrome这4个程序。
        * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291821713.png" alt="image-20230429182104621" style="zoom:50%;" />
      * 但是如果此时有第5个程序也想同时运行，比如想同时再听歌的话，那么就必须剥夺具中的某一个程序对CPU的使用权，比如说把Word这个程序给换下CPU，然后让QQ音乐这个程序上CPU运行，然后Word和QQ音乐这两个程序交替着来使用CPU
        * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291823886.png" alt="image-20230429182300783" style="zoom:33%;" />
    * 总之对于4核CPU来说，同一时刻只能同时执行4个程序，而如果有超过4个以上的程序同时运行的话，那么并发性依然是必不可少的，所以不管是早期的操作系统还是现代的操作系统，并发性都是操作系统一个很重要的最基本的特性。



### 操作系统的特征——共享

* <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304292149263.png" alt="image-20230429214914114" style="zoom: 67%;" />

* 再来看第二个共享特性
*  共享就是资源共享，是指系统当中的资源可以供内存当中的多个并发执行的进程共同使用。 
* 资源共享可以分为两种共享方式，一个是互斥共享， 一个是同时共享。
  * 互斥共享是指在一个时间段内这个资源只允许一个进程使用
  * 同时共享是指在一个时间段内这个资源允许多个进程“同时”对它进行访问。
    * 同时为什么要打双引号呢？因为它往往是在宏观上同时，而在微观上可能是交替地对这个资源进行访问的。
    
  * 看一个例子，对于互斥共享方式来说，比如说使用QQ和微信视频聊天在同一时间段内只会允许摄像头给其中的一个进程使用。 比如用QQ和你的家人正在进行聊天，那么这个时候你还想用电脑的微信和你的小伙伴进行视频聊天的话就会发现这个视频是发不出去的。 因为它会提示你这个摄像头已经被分配给其他的进程。 所以这就是互斥共享方式，在一个时间段内， 摄像头这个资源只能被分配给其中的一个进程使用。 
  * 再来看第二个例子，同时共享方式，可能会遇到这样的情况，用QQ给某人发送文件A，然后用微信发送文件B。在宏观上看来， 微信和QQ的文件发送进度条都是一直在往前推进的， 所以在用户宏观上看来，看起来两边都是在同时读取发送文件。 这些文件它是被放在硬盘里的，那么在用户看来就像是QQ和微信这两个进程都在同时访问硬盘这个资源，从中读取各自的文件数据。但事实上，微观上来看，这两个进程它们是交替的访问硬盘的， QQ先读出了文件A的某一个部分，然后微信又读出文件B的某一部分，接下来又交替着让QQ读文件A的下一部分，然后以此交替地访问硬盘。 所以这就是所谓的微观上交替地访问硬盘资源的意思。
  * 这就是两个很典型的互斥共享和同时共享的例子。有的时候同时共享，也有可能是微观上确实在同时的共享这个资源，比如说你在玩游戏的时候一边听歌，你会发现你的扬声器声音输出设备一边在播放游戏的音效， 同时还在播放音乐，所以在这种情况下，扬声器这个声音输出设备是真的在微观上也是同时正在被你的音乐播放器和游戏这两个进程同时使用的，所以这个地方稍微注意一下。 




## 操作系统的特征——并发和共享的关系

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304292208266.png" alt="image-20230429220815172" style="zoom: 60%;" />

* 看一下并发和共享的关系。
* 继续通过上面的例子来分析，用QQ发送文件A微信发送文件B就说明QQ和微信两个进程其实是在并发的执行的，也就是有并发性。这两个进程需要同时完成发送文件的事情，所以他们需要共享的访问硬盘资源，又体现了它的共享特性。
* 如果说这个系统失去了并发性， 就说明在系统当中同一时间段只能有一个程序正在运行。 那么，也就意味着这两个进程就不需要同时共享地来访问硬盘资源。 那么共享性也就失去了存在的意义。 
* 而另一个角度， 如果说这个系统失去了共享性，那么QQ和微信这两个进程就没办法同时访问硬盘资源，所以他们也没办法完成同时发送文件这件事。 既然如此，QQ和微信也就没办法并发地执行，所以说如果失去了并发性，那么共享性就失去了存在的意义。 而如果失去了共享性那么并发性就不可能被实现，所以并发和共享是互为存在条件的。 



## 操作系统的特征--虚拟

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304292213916.png" alt="image-20230429221349783" style="zoom: 67%;" />

* 第三个特征虚拟，虚拟是指把物理上的实体对应为若干个逻辑上的对应物
* 直接看一个实际的例子，在一个程序需要执行的时候，需要把它放入到内存，并且给它分配CPU才能执行，这是一个我特别喜欢的游戏GTA，这个游戏官方的数据是说它需要4G的运行内存，除了这个游戏之外，其实我的电脑当中还有各种各样的别的一些应用软件程序，我的电脑其实只有4 GB的内存，但是在我的电脑上可以同时打开GTA、QQ，微信、迅雷，同时，还在用网易云音乐在听音乐，所以看起来这么多的应用软件，它们总共需要的内存量其实是远大于4 GB的。 但为什么他们又可以在我的电脑上同时运行呢？ 其实这就是采用了虚拟存储器技术，实际上这个电脑只有4 GB的内存也就是物理上的实体是4 GB的内存，但是在用户看来，在我看来，它变成了逻辑上的对应物， 它看起来是远远大于4 GB的。 所以这就是虚拟特性，虚拟技术的一个例子。
* 虚拟存储器技术其实就是虚拟技术当中的空分复用技术，这个地方大家只需要对虚拟存储器和空分复用技术能有一个印象就可以了，这两个知识点是第三章会重点讲解的知识点

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304292224961.png" alt="image-20230429222457784" style="zoom: 67%;" />

* 再看另外一个例子，在一个单核计算机下面用户可以打开QQ，迅雷，……，既然这个电脑只有一个单核的CPU，为什么计算机当中还可以同时执行这么多的程序呢，其实这就用到虚拟处理器的技术
* 实际上，只有一个单核CPU，这是物理上的实体，但是在用户看来，在我看来，这个计算机似乎变成了6个CPU，在同时为自己服务，这就是所谓的逻辑上的实体。
*  那么，虚拟处理器技术就是典型“时分复用技术”在微观上看一整个大的时间段被分割为了一个一个微小的时间片时间段。 然后在各个时间段内处理机是交替地为各个进程服务的，所以这就是时分的意思，它把一个大的时间段分为了各个很小的时间片，所以这是时分复用技术。 

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304292225411.png" alt="image-20230429222530333" style="zoom: 67%;" />

* 回顾：实现虚拟性的虚拟技术分为空分复用技术和时分复用技术。如果说这个系统当中操作系统失去了并发性，那么就意味着一个时间段内只需要有一道程序在执行。如果没有了并发性，时分复用技术和空分复用技术其实也没有存在的意义。 也就是说虚拟性也就没必要实现了，所以可以说没有并发性就谈不上虚拟性，虚拟性就没有存在的意义。 



### 操作系统的特征——异步

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304292228126.png" alt="image-20230429222820973" style="zoom: 67%;" />

* 第四个特性异步性，异步是指多道程序环境下允许多个程序并发执行，但是由于资源有限，进程的执行不是一贯到底，而是走走停停的， 以不可预知的速度向前推进

* 用一个例子来帮助大家理解什么是异步。 假设老渣现在要和两个女孩并发地约会，然后一号女孩会让老渣干两件事，首先是陪她吃饭，第二个是把心给她，二号女孩会让老渣先把心给她，然后再让老渣陪她吃饭。所以老渣在执行一号的这两条指令的过程，其实就相当于是在执行第一道程序，而执行二号女孩这两条指令的过程， 其实就相当于他是在执行第二道程序。 而这两道程序需要并发的执行,另外老渣它只有一颗真心，所以老渣的心相当于这儿提到的有限的系统资源。 由于这两道程序在系统中是并发的运行的，因此这两道程序有可能会争抢着使用这个资源。 所以老渣在执行这两道程序的时候，有可能是这么约的， 比如说刚开始他是和—号约也就是执行了一号的第一条指令，陪他吃饭，接下来的这个时间段也是和一号约执行了他的第二个指令，那根据一号的这个要求，老渣会把心给一号，也就是说这个系统资源分配给了一号，而接下来的这个时间段是要和二号约,二号要求老渣把心给他，但是由于此时老渣的心这个有限的系统资源已经给了一号，并且—号没有把这个系统资源归还给老渣，所以二号要求老渣把心给他，这个请求就不能够被满足，所以二号程序运行到这个地方的时候，肯定需要被阻塞, 需要先停一段时间，等他获得了他想要的这个资源之后，二号程序才可以接着往下执行。另一种情况，老渣还有可能是这么约的，他刚开始有可能是和—号约然后陪一号吃饭，接下来的这个时间段是和二号约根据二号的指令，他把心给了二号。那再接下来他又和一号约，也就是说，此时他要执行 一号的第二条指令，一号让老渣把心给他。 但是由于此时这个有限的系统资源是被二号所占有的。 并且二号没有归还给系统，因此一号的把心给他的请求不能够被满足，所以这个第一道程序的执行在这个位置就会被阻塞。 然后等待这个系统资源的分配，所以从这个例子当中，我们很直观的可以看到在两道程序并发运行的过程当中。这些并发运行的程序，它们都会争抢着使用系统当中的这些资源，所以这些程序的运行并不是一贯到底，而是走走停停的,以不可预知的速度向前推进的，有的时候有可能是二号需要停下来等待，有的时候有可能是—号需要停下来等待。
  
* 在实际的操作系统当中，各个并发运行的程序之间也会出现这种争抢着使用有限的系统资源的情况，比如说两个程序争抢着使用摄像头资源或者争抢着使用打印机资源等等。 所以这是多道程序环境下多个程序并发执行所带来的一个特性，也就是所谓的异步性。

* 如果失去了并发性的话， 就意味着系统只能串行的执行各个程序。也就是说，第一道程序执行完了，然后—号把老渣的心归还给老渣之后。 它才会接着执行第二道程序，在这种情况下，各个程序的执行肯定是会一贯到底的，并不会走走停停。 
  
* 所以说只有系统拥有并发性，才有可能会导致之前所说的异步性

  

## 知识回顾与重要考点

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304292239639.png" alt="image-20230429223900530" style="zoom: 60%;" />

* 操作系统的四个特性：并发，共享，虚拟和异步
* 在考试当中需要重点关注的是并发和并行的区别。刚才用老渣和小渣两个约会的策略来进行了说明。 
* 另外注意并发和共享是互为存在条件的，如果没有并发，就谈不上虚拟和异步。 而并发和共享本身又是互为存在条件的， 所以可以说，没有并发和共享，就谈不上虚拟和异步。虚拟和异步就没有存在的意义，这就是为什么说它们是最基本的两个特征。

