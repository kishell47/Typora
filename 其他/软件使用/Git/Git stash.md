# Git stash

* `stash`：藏起来，暂存

* 使用 `git stash` 命令将当前的修改保存到一个临时的“堆栈”中，以便以后恢复这些修改
* 使用 `git stash` 命令时，Git 会将你当前的修改暂时存储到一个“堆栈”中，并将工作目录恢复到上一个提交的状态
* 这意味着你可以在不提交当前修改的情况下，切换到其他分支或进行其他操作，而不会丢失当前的修改。
* 使用 `git stash` 命令可以帮助你更加方便地管理修改，特别是在你需要在不同的分支之间切换时。它可以避免不必要的提交，同时也不会丢失修改。



## Git stash对单文件起作用

* 使用 `git stash push <path/to/file>` 命令将指定文件的修改保存到堆栈中，而不是保存整个工作目录的修改。这个命令会将你的修改保存到一个新的堆栈项中，并将工作目录恢复到上一个提交的状态，与 `git stash` 命令的默认行为相同。
* 当你需要恢复保存的修改时，可以使用 `git stash apply <stash-item>` 命令将修改从堆栈中取出并应用到工作目录中。
  * `<stash-item>` 是你要恢复的堆栈项的名称或编号。如果你没有指定堆栈项的名称或编号，则默认恢复最新的堆栈项。
* 在实际开发中，当你只需要保存某个文件的修改，而不需要保存整个工作目录的修改时，`git stash push <path/to/file>` 命令就非常有用。



## Git stash中的修改不会自动提交到Git仓库

* 当你使用 `git stash` 命令时，Git 会将你在工作目录中做出的修改暂存（stash）起来，以便在之后可以重新应用这些修改。stash 中的修改不会自动提交到 Git 仓库，而是保存在本地 Git 仓库中的一个特殊区域中。
* 如果你想将 stash 中的修改提交到 Git 仓库中，可以使用 `git stash apply` 或 `git stash pop` 命令将修改应用到工作目录中，然后再通过 `git add` 和 `git commit` 命令提交修改到 Git 仓库。
* 如果你不想提交 stash 中的修改，也可以使用 `git stash drop` 命令将 stash 删除，或者使用 `git stash branch` 命令将 stash 中的修改应用到新的分支上，并在该分支上进行修改和提交。



## Git stash中的修改不会被编译

* stash 中的修改不会被编译，它只是暂存了你在工作目录中的修改，而不是提交到 Git 仓库中。
* 当你使用 `git stash` 命令将修改暂存起来时，这些修改会被保存在本地 Git 仓库的一个特殊区域中，而不会对工作目录或者编译产生影响。
* 编译工作目录的内容通常是指将工作目录中的代码文件编译成可执行文件或者库文件的过程。当你对工作目录中的代码进行修改时，如果要编译这些修改后的代码，你需要先使用相应的编译工具来编译这些代码文件。**==在编译过程中，通常只会编译工作目录中的代码文件，而不会考虑 Git 仓库中未提交的修改或者 stash 中的修改。==**
* 所以，如果你需要编译 stash 中的修改，你需要先将这些修改应用到工作目录中，然后再进行编译。你可以使用 `git stash apply` 或 `git stash pop` 命令将修改应用到工作目录中，然后再进行编译。



## 编译通常是对编译工作目录中的代码进行的

* 编译器将工作目录中的源代码文件转换为可执行文件或库文件。
* **==编译器只编译工作目录中的代码，而不考虑 Git 仓库中未提交的修改或者 `git stash` 中的修改。因此，在进行编译之前，你需要将所有需要编译的修改应用到工作目录中，以确保编译器编译的是最新的代码。==**



## VScode/Git Graph中使用Git stash/git stash apply单个文件

* `git stash`
  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304181505532.png" alt="image-20230418150537469" style="zoom: 60%;" />



* `git stash apply`
  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304181510556.png" alt="image-20230418151006494" style="zoom: 50%;" />



# Git stash pop

* 使用 `git stash pop` 命令可以将修改从堆栈中取出并应用到工作目录中。这样就可以避免提交不必要的修改，同时也不会丢失这些修改。
* 当你需要恢复保存的修改时，可以使用 `git stash pop` 命令将修改从堆栈中取出并应用到工作目录中。此外，你还可以使用 `git stash list` 命令查看保存在堆栈中的所有修改。

