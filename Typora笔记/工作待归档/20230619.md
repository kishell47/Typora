# 硬件定时器

* 硬件定时器比较准
* 硬件定时器里面不要有串口发送，不然buf可能查询的一直是空的
* 中断不能嵌套
* 硬件定时器会触发中断





# 软件定时器

* 软件定时器没那么准
* 靠程序查询tick





# 硬件定时器和软件定时器

硬件定时器和软件定时器是两种不同的定时机制，它们在实现原理和使用方式上有所区别。

硬件定时器：

- 硬件定时器是由硬件电路实现的，通常集成在微控制器或芯片中。
- 硬件定时器是基于硬件时钟源的计时器，具有高精度和稳定性。
- 硬件定时器的计时工作不受软件的干扰，能够在后台持续计时，不占用CPU资源。
- 硬件定时器通常用于需要精确计时的任务，例如生成精确的时序、测量时间间隔等。

软件定时器：

- 软件定时器是通过软件实现的计时器，通常使用编程语言中的计时函数或定时中断来实现。
- 软件定时器的计时工作是依赖于CPU的运行，需要不断地执行计时代码。
- 软件定时器的精度和稳定性受CPU运行状态、其他任务的影响，可能存在一定的误差。
- 软件定时器通常用于需要相对较低精度的计时任务，例如定时触发软件事件、定时执行任务等。

选择硬件定时器还是软件定时器取决于具体的应用需求和硬件平台的支持。硬件定时器适用于对时间精度和稳定性要求较高的任务，而软件定时器则更加灵活，适用于一些简单的定时需求或无法使用硬件定时器的情况。



# 软件定时器

* `opp_time_event_t *opp_on_timer(opp_timer_callback_t cb,void *data, u32 t_us);`

  * `opp_on_timer` 函数是一个定时器事件注册函数，用于注册一个定时器事件。下面是对该函数参数的解释：
    - `cb`：定时器回调函数，当定时器事件触发时会调用该回调函数进行处理。
    - `data`：传递给定时器回调函数的参数，可以是任意类型的数据。
    - `t_us`：定时器的触发时间，以微秒为单位。
  * 函数的返回值是一个指向 `opp_time_event_t` 结构体的指针，该结构体用于表示注册的定时器事件。通过该指针可以对定时器事件进行操作，例如取消注册。
  * 使用 `opp_on_timer` 函数可以注册定时器事件，并在指定的时间后触发回调函数进行相应的处理操作。

* 根据提供的信息，`opp_time_event_t` 结构体用于表示定时器事件，并且 `opp_on_timer` 函数用于注册一个定时器事件。下面是对函数参数的解释：

  - `cb`：定时器回调函数，当定时器事件触发时会调用该回调函数进行处理。
  - `data`：传递给定时器回调函数的参数，可以是任意类型的数据。
  - `t_us`：定时器的触发时间，以微秒为单位。

  函数的返回值是一个指向 `opp_time_event_t` 结构体的指针，通过该指针可以对定时器事件进行操作，例如取消注册。

  请注意，这些定义和函数可能属于某个特定的库或框架，并且可能需要特定的上下文和初始化设置才能正确使用。如果你能提供更多关于这些定义和函数的上下文或相关信息，我可以提供更准确的帮助。



# 配网指示灯

1.进入配网窗口期一直亮
2.配网成功或者超时就灭
3.识别闪烁三下
4.感应到人亮400ms灭
5.配网窗口期不亮
6.复位闪三下重启常亮

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202306192001952.png" alt="image-20230619200129879" style="zoom: 80%;" />

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202306191959141.jpg" alt="d6a7787a7ece908b03c49228ad25447" style="zoom:50%;" />





# 转测邮件

 

 

**发件人:** Dong Chen(陈栋) 
 **发送时间:** 2023年6月13日 23:46
 **收件人:** Yanfeng Zhao(赵岩峰) <[zyf@opple.com](mailto:zyf@opple.com)>
 **抄送:** jialin yan(闫佳林) <[JIALIN.YAN@opple.com](mailto:JIALIN.YAN@opple.com)>; Sunliang Chen(陈孙亮) <[Sunliang.Chen@opple.com](mailto:Sunliang.Chen@opple.com)>; Qi Li(李琦) <[QI.LI1@opple.com](mailto:QI.LI1@opple.com)>; CHONGCHONG LI(李冲冲) <[CHONGCHONG.LI@opple.com](mailto:CHONGCHONG.LI@opple.com)>; JING FENG(冯晶) <[JING.FENG@opple.com](mailto:JING.FENG@opple.com)>
 **主题:** SDL Ringo蓝牙固件V1004 & 485主控固件V103 & IIC主控固件V101转测

 

Dear all,

 

SDL Ringo蓝牙固件V1004&主控固件V103转测, 固件包见附件。

蓝牙固件release note:

| 增补功能 |        |                                                          |        |
| -------- | ------ | -------------------------------------------------------- | ------ |
| 序号     | 功能项 | 功能描述                                                 | 影响面 |
| 1        | 配网   | 支持sigmesh标准配网和快速配网                            |        |
| 2        | OTA    | 支持GATT OTA和mesh OTA, 支持OTA主固件和子固件            |        |
| 3        | 控制   | 支持总控和回路控制，支持开关、亮度、色温、颜色、六组阳光 |        |
| 4        | 配置   | 支持配置渐变时间、复位模式、上电亮度色温、TOF使能        |        |
| 5        | 场景   | 支持场景模板和标准场景                                   |        |
| 6        | 复位   | 支持普通复位和专业复位                                   |        |

 

涉及class sku:

2d070013

2d070012

2d070011

2d070010

2d07000f

2d07000e

2d07000d

2d07000c

2d07000b

2d07000a

2d070009

2d070008

2d070007

 

涉及硬件：

SDL Ringo蓝牙控制板 & 主控板

 

陈栋

 





# 烧写四元组写不进去

* <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202306192142809.png" alt="image-20230619214209612" style="zoom:50%;" />

* <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202306192143777.png" alt="image-20230619214300664" style="zoom: 80%;" />
  * 按下Tab键，如果全是FF说明没有东西，可以写入
  * 如果有东西，需要擦除之后再写入
* 