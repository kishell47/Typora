# 第一章 计算机系统概述

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202305092047835.png" alt="image-20230509204701738" style="zoom:50%;" />



# 大家熟悉的操作系统

* 大家都熟悉的操作系统都有哪些?
  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291329892.png" alt="image-20230429132908747" style="zoom: 50%;" />
  * 苹果设备
    * 苹果电脑使用的操作系统是mac OS
    * 苹果手机使用的操作系统是iOS系统
  * 安卓和Windows操作系统
  * Linux操作系统
  * 诺基亚的塞班系统



# 操作系统的概念（定义）功能和目标



## 知识总览

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291332620.png" alt="image-20230429133248541" style="zoom: 53%;" />

* 操作系统的概念和定义要回答的就是什么是操作系统
* 操作系统的功能和目标要回答的是操作系统需要做什么



## 操作系统的概念（定义）



### 操作系统在整个计算机系统当中所处的位置

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291339724.png" alt="image-20230429133952654" style="zoom:60%;" />

* 首先结合生活经验看一下**操作系统**在**整个计算机体系**当中所处的位置和角色。看一下现在所使用的电脑是怎么样一步一步变成现在看到的这个样子的，即一台电脑的诞生.
* 第一步，厂家会把CPU、主板等等这一系列的硬件给组装成一台裸机，**裸机就是只有硬件的机器，它不包含操作系统**。但是在这个机器出售之前，一般厂家还会在这个裸机的基础之上为我们安装一个操作系统，比如说最常用的就是WIindows的操作系统，当我们买到这个电脑之后就可以在这个操作系统之上来安装一些我们想要使用的应用程序比如说像QQ，之后，作为用户就可以来使用这些应用程序了。
* 所以根据一台电脑的诞生过程就可以看出计算机系统的层次结构，最底层的当然是纯硬件又称之为裸机。在裸机上面会安装一层操作系统，而基于操作系统又可以安装一系列的应用软件，用户是处于最上面一层。用户和操作系统的边界是有一些相连的，部分应用程序和操作系统也会有一些相连的部分。



### 操作系统的定义

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291412441.png" alt="image-20230429141208315" style="zoom: 70%;" />

* **操作系统的定义：**操作系统是指控制和**管理**整个计算机系统的**硬件和软件**资源，并合理的组织调度计算机的工作和资源的分配；以**提供给用户和其他软件方便的接口和环境**;它是计算机系统中最基本的**系统软件**。
  * 第一句话：操作系统是指控制和**管理**整个计算机系统的**硬件和软件**资源，并合理的组织调度计算机的工作和资源的分配.
    * 其实这句话他想表达的无非就是操作系统他是系统资源的管理者，系统资源包含了硬件和软件资源。
    * 来看一个直观的例子，如果大家使用的是Windows操作系统的话，可以用`Ctrl+Alt+Del`的方式来打开任务管理器。然后在任务管理器这个界面就可以看到现在系统当中正在运行的进程有哪些，所谓的**进程其实就是正在运行的软件，正在运行的程序**，比如说大家熟悉的QQ、Chrome等等。所以从这个地方可以看到操作系统肯定是在对这些软件资源进行管理的
      * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291426123.png" alt="image-20230429142600993" style="zoom: 50%;" />
    * 再看右边这个界面可以看到操作系统对CPU，内存等等这一系列硬件资源的使用情况其实也是在监控的，比如说现在QQ这个进程它使用了138.9MB兆字节内存空间。所以从右半部分的这个界面来看，操作系统肯定是在对硬件进行管理的
      * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291429458.png" alt="image-20230429142929366" style="zoom: 67%;" />
    * 因此操作系统作为软件和硬件中间的一个层次，它是系统资源的管理者，既管理了软件资源也管理了硬件资源。
    * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291442156.png" alt="image-20230429144215003" style="zoom: 50%;" />
  * 第二句话，以**提供给用户和其他软件方便的接口和环境**.
    * 操作系统要提供给用户和其他软件方便的接口和环境，其实这句话想表达的就是操作系统要向上层提供方便易用的服务，上层包括用户和普通的应用程序
    * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291440759.png" alt="image-20230429144054607" style="zoom:50%;" />
  * 再看第三句话，操作系统是计算机系统中最基本的**系统软件**.
    * 操作系统是计算机系统当中最基本的系统软件，也就是说操作系统其实是一种软件，而不是硬件，但是从这个图当中也可以看到操作系统是最接近硬件的一层软件
    * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291444572.png" alt="image-20230429144408442" style="zoom:50%;" />
* 接下来对操作系统的这三个功能进行更进一步的细分和分析，让大家更形象地来体会操作系统的作用。
  * 操作系统的三个功能
    * 操作系统是系统资源的管理者，系统资源包含了硬件和软件资源
    * 操作系统向上层提供方便易用的服务，上层包括用户和普通的应用程序
    * 操作系统是最接近硬件的一层软件



### 操作系统的功能和目标一一作为系统资源的管理者

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291453391.png" alt="image-20230429145344239" style="zoom:80%;" />

* 首先要看的是操作系统作为软件和硬件中间的层次，是系统资源的管理者
* 用大家使用QQ和朋友视频聊天的例子帮助大家来理解操作系统作为系统资源的管理者，要做一些什么事情？
* 用QQ和朋友视频聊天的过程：
  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291523314.png" alt="image-20230429152302069" style="zoom: 60%;" />
  * 首先肯定是需要在文件夹当中找到QQ的安装位置比如说像我的电脑当中QQ就是安装在`D:/Tencent/QQ/Bin`这个路径下面。
  * 所以当找到QQ的启动程序之后，就可以双击打开QQ.exe
  * 当双击之后QQ程序就可以正常的运行，然后就可以用QQ和我的朋友进行视频聊天了
* 在这个过程当中可以看到第一步是通过了一层一层的文件夹目录找到了QQ启动程序。
  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291527648.png" alt="image-20230429152706349" style="zoom: 33%;" />
* 除了这个文件之外，系统当中还有各式各样的其他的文件，但是这些文件的组织和管理其实是操作系统帮我们完成的。所以这就涉及到了操作系统作为系统资源的管理者所要提供的一个功能叫做文件管理的功能。
  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291529274.png" alt="image-20230429152923144" style="zoom: 43%;" />
* 第二步当我们双击QQ.exe的时候，这个程序就可以开始正常的运行，在这个地方需要补充的一个知识点就是一个程序在执行之前其实是需要把这个程序的数据放到内存里的。
  * 补充知识：执行一个程序前**==需要将该程序放到内存中==**，才能被CPU处理
* 所以在双击打开QQ.exe的时候，其实在背后操作系统帮我们做了一个很重要的事情就是把这个程序的数据从磁盘放入了内存当中，并且这些数据要放到内存中的什么位置，这些其实都是操作系统帮我们完成的。所以这一步就涉及到了操作系统所要提供的第二个功能叫做存储器管理，或者叫主存管理，内存管理。
  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291539329.png" alt="image-20230429153907066" style="zoom: 33%;" />
* 当QQ程序运行的过程当中，其实是需要被处理机也就是CPU进行处理的，而什么时候给QQ程序分配处理机资源这个事情是操作系统在背后替我们完成的，因此这就涉及到了第三个功能叫做处理机管理。
  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291541809.png" alt="image-20230429154122523" style="zoom: 33%;" />
* 第四步开始使用QQ程序和朋友视频聊天，在视频聊天的过程当中，肯定需要把摄像头这个设备分配给QQ程序使用，因此像摄像头这一类设备资源也是要由操作系统替我们管理，由操作系统来决定应该要把这些设备分配给哪个程序使用，所以这就涉及到了操作系统要提供的第四个功能，叫做设备管理。
  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291544139.png" alt="image-20230429154415993" style="zoom: 50%;" />
* 第二章讲的就是处理机管理，第三章讲的是存储器管理，第四章讲的是文件管理，第五章讲的是设备管理，所以其实操作系统这门课在后期要重点学习的就是操作系统作为系统资源的管理者要如何设计和实现处理机管理、存储器管理、文件管理、设备管理这些功能



### 操作系统的功能和目标一一向上层提供方便易用的服务

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291555818.png" alt="image-20230429155505668" style="zoom: 50%;" />

* 操作系统的功能和目标是向上层提供方便易用的服务是什么意思？
* 计算机的最底层其实是裸机也就是纯硬件，最底层的这些硬件其实它只能听得懂二进制指令，也就是机器语言，也就是说如果我们要直接和这些硬件打交道的话，只能通过二进制的语言和这些硬件进行交互。所以说最底层的这些硬件，它对外暴露的其实是一些丑陋的，不友好的交互接口。正常的人类很难和这些纯硬件直接来打交道，但是在硬件之上安装的操作系统其实会向它的上层提供一种更美丽、更友好的交互接口，在安装了操作系统之后，用户和应用程序不需要直接和硬件打交道。只需要告诉操作系统，想要得到的服务就可以，而操作系统会把用户的这些命令需求翻译成二进制来告诉硬件，然后由硬件来执行想要的这些操作。这其实是一个很典型的封装的思想。操作系统把一些丑陋的硬件功能封装成了一些简单易用的服务，使用户能够更方便的使用计算机。上层的用户不需要再关心底层的硬件细节，而只需要用这种更简单的方式对操作系统发出命令就可以，剩下的操作系统会替我们来完成
* 其实这种封装思想在日常生活中也经常被使用

  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291605071.png" alt="image-20230429160556591" style="zoom: 50%;" />
  * 比如说，我们的汽车如果把它拆解了的话，会发现里面有很多很多很复杂的构件，但是汽车设计师们会把这些底层复杂的构建隐藏起来，把它封装成一个简单易用的接口，对用户暴露出的就只有方向盘，刹车，油门这些用户能够理解的简单易用的接口。但是用户不需要再关心它底层到底是怎么实现转向，加速减速这些功能的。所以其实操作系统做的事情本质上和这种封装没有任何的区别
* 接下来看一下操作系统屏蔽了底层硬件细节之后，它对上层提供了哪些方便应用的服务呢？

  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291608550.png" alt="image-20230429160814249" style="zoom: 67%;" />
  * 首先来看一个最熟悉的操作系统提供的服务叫做GUI又叫图形化用户接口。
  * 用户可以使用这些形象的图形界面来对我们整个系统进行操作，比如说在Windows操作系统当中，如果要删除一个文件的话，只需要把文件拖拽到回收站即可。这种操作方式对于用户来说是很形象，很容易理解的，但是在这样一个简单的拖拽动作之后，操作系统其实在背后为我们做了很多很多的事情。现代的操作系统一般都会对上层用户提供这种图形化的用户接口。不过，一些早期的操作系统其实是并没有这种图形化的界面的。
* 早期的操作系统都是让用户通过命令接口的方式和操作系统进行交互。也就是用命令行的方式和操作系统进行交互，命令接口又分为两种一种是联机命令接口，一种是脱机命令接口。即操作系统对上层提供两种命令接口，一种是联机命令接口，一种是脱机命令接口。

  * 先来看第一种联机命令接口。它又叫交互式的命令接口

    * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291617975.png" alt="image-20230429161733798" style="zoom:50%;" />

    * 来看一个直观的例子，如果使用的是Windows操作系统的话，可以用`win+R`的方式来打开命令解释器，也就是平时经常会看到的小黑框。然后可以在命令解释器当中输入一个命令叫做`time`，输入了`time`这个命令之后，操作系统会告诉我们当前的时间是几点几分，接下来，操作系统又会让用户输入一个新的时间，也就是说你想把系统时间调到几点几分几秒。像这个`time`命令，就是一个很典型的交互式的命令，也就是用户说一句，系统会跟着做一句，接下来用户需要再说一句，系统才会跟着再做一句。整个过程，用户和操作系统是在不断的交互的，除了`time`命令之外，还有很多别的用于和操作系统交互的命令。由这些命令组成了所谓的交互式的命令接口或者叫联机命令接口。

  * 第二种命令接口叫做脱机命令接口，又叫批处理命令接口
    * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291627498.png" alt="image-20230429162737209" style="zoom: 50%;" />
    * 还是以Windows操作系统为例，可以在C盘当中搜索一个*.bat作为后缀的文件。然后随便打开其中的一个文件，可以看到里面有密密麻麻的一系列的命令，但别看它复杂，其实它本质上和刚才所看到的`time`命令没有任何区别，只不过是把这一系列的命令罗列在了这样的一个清单里，然后当执行这个.bat文件的时候操作系统其实就是根据这个文件当中的这些命令一条一条地往后执行。也就是说使用这种脱机命令接口或者叫批处理命令接口和操作系统进行交互的话，那么其实是一次提出一堆的请求。然后操作系统会根据我们的指示一条一条地执行这一堆的请求，所以这也是为什么这种命令接口称作为批处理命令接口的原因
* 刚才提到的三种接口GUI、联机命令接口和脱机命令接口都是可以让普通用户直接使用的。
* 操作系统还有一种对外提供的接口叫做**程序接口**，这种接口是给我们程序员使用的，可以在我们写的程序当中，通过**系统调用**的方式来使用程序接口，注意普通用户是不能直接使用程序接口的，只能通过编写程序代码的方式来**间接**的使用程序接口。

  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291653200.png" alt="image-20230429165305044" style="zoom: 50%;" />
  * 用一个例子来帮助大家加深理解，什么叫系统调用，什么叫程序接口。在写c语言的"Hello world"程序的时候会使用到`printf`这个函数,然后在执行这个程序的时候，会在电脑屏幕上打印出Hello world这两个单词。虽然只是简单的调用了`printf`函数，但是其实这个函数在底层实现的时候肯定是使用到了操作系统提供的和显示相关的那些系统调用的功能，也就说普通程序员其实使用了C语言提供的库函数，也就是`printf`这个函数。而这个库函数在底层实现的时候其实是使用了操作系统提供的系统调用的功能。而操作系统在收到这个系统调用相关的请求之后，才会替我们去操作这个硬件，也就是显示器，并且在这个显示器上面显示出Hello world这两个单词，所以其实系统调用很类似于我们很熟悉的函数调用。很多操作系统当中都提供了上百种的系统调用。由这些系统调用组成了所谓的程序接口。应用程序请求操作系统服务的唯一方式就是通过系统调用的方式。有的教材当中系统调用又会被称为**广义指令**。
* 总结，这个部分讲了操作系统向上层提供了很多方便易用的服务，有的接口是直接给用户使用的，比如说GUI和命令接口，而有的接口是给软件或者说给程序员使用的，比如说程序接口。
  * <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291704906.png" alt="image-20230429170421765" style="zoom: 57%;" />
* 为什么用户和操作系统中间有一段相接的部分？
  * 因为用户通过命令接口这些方式可以直接和操作系统进行交互
  * 而应用程序需要通过系统调用的方式也就是通过程序接口来和操作系统进行交互。
* 联机命令接口和脱机命令接口的区别，也需要注意，有可能在选择题当中进行考察
  * 联机命令接口或者叫交互式命令接口是用户说一句，系统做一句
  * 脱机命令接口或者叫批处理命令接口是用户说一堆，系统跟着做一堆。
* 另外，在有的教材当中，会把命令接口和程序接口统称为用户接口。也就是说，狭义的用户接口其实不包含GUI



### 操作系统的功能和目标一一作为最接近硬件的层次

- <img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202305130800193.png" alt="image-20230429170853266" style="zoom:50%;" />

* 操作系统作为最接近硬件的这个层次所需要做的事情就是要实现对**硬件机器的拓展**。

* 如果一个计算机当中没有任何的软件支持，这种计算机就称之为**裸机**，如果在裸机上安装了操作系统的话就可以把裸机改造成功能更强，使用更方便的机器

* 把覆盖了软件的这种机器称为**扩充机器**，或者称为**虚拟机**。当然，这些只是一些无关紧要的概念。

* 对于我们来说，更重要的事情是要理解为什么说操作系统可以实现对硬件机器的拓展？

  * 为了理解这个特点，还是用刚才汽车的例子来进行类比。
  * 比如说汽车当中原本只有一些零碎的硬件
    * 比如发动机，其实它只有一个功能，就是会转
    * 然后轮胎它也只有一个功能，就是会滚
  * 但是如果在这种原始的硬件机器上再覆盖上一层传动系统的话，就可以让发动机来带动着轮子来转
  * 这样的话，汽车就可以开始往前行走了，所以增加了这样的一个系统之后，以前的这些简单的硬件机器就得到了一种功能上的拓展。
  * 而操作系统对硬件机器的拓展也是类似的，操作系统把CPU、内存等等这一系列的硬件合理的组织起来并且让这些硬件能够相互协调配合着工作。这样的话，这些简单的硬件就可以组合起来实现更多更复杂的功能，所以说操作系统实现了对这些硬件机器功能的一个拓展。使这些单纯的硬件功能更强，使用更方便

  

## 知识回顾与重点考点

<img src="https://cvp.oss-cn-shanghai.aliyuncs.com/picgo/202304291722780.png" alt="image-20230429172257638" style="zoom: 67%;" />

* 在这个小节当中，介绍了什么是操作系统，操作系统需要实现什么样的功能
* 操作系统这门课最关注的是它作为系统资源的管理者所需要实现的处理机管理、存储器管理、文件管理、设备管理这些功能
* 这些功能应该怎么实现?怎么设计？这是之后的课程当中会重点讲解的
* 这个小节当中有可能会作为选择题考察的是操作系统它对上层提供了哪些服务，大家要理解什么是GUI，什么是命令接口，联机命令接口和脱机命令接口的区别是什么？
* 另外，由一系列的系统调用组成了程序接口。系统调用这个概念会在后面专门用一个小节再进行更进一步的分析和讲解。





